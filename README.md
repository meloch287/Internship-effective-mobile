# Решение тестового задания на позицию Junior Backend Developer (Python) для Effective-Mobile

# Основные компоненты
### 1. Модель Order
   
#### Поля:

- id: Уникальный идентификатор (генерируется автоматически)
- table_number: Номер стола
- items: Список заказанных блюд с ценами (хранится в JSON-формате)
- total_price: Общая стоимость заказа (вычисляется автоматически)
- status: Статус заказа — "в ожидании", "готово", "оплачено"

#### Бизнес-логика:

- Метод calculate_total суммирует цены блюд, а переопределённый метод save автоматически сохраняет вычисленную стоимость.

### 2. Веб-интерфейс
   
- CRUD операции: Реализованы страницы для создания, редактирования, удаления и отображения заказов.
- Поиск заказов: Возможность поиска по номеру стола или статусу через поисковую строку.
- Изменение статуса заказа: Интерфейс позволяет обновлять статус заказа.
- Расчет выручки: Отдельная страница для отображения общей суммы выручки по заказам со статусом «оплачено».

### 3. REST API
   
Доступ к заказам через API:
  
- Реализованы эндпоинты для добавления, удаления, редактирования и поиска заказов.
- Технология: Использование Django REST Framework для создания сериализаторов и API-представлений.
- Маршруты API: Эндпоинты доступны по префиксу /api/.

# Документация по методам API
### Orders

#### Добавление заказа

- URL: ```POST /api/orders/```
-Параметры (JSON):
- ```table_number``` (int) — номер стола (обязательный)
- ```items``` (JSON) — список блюд с ценами (например, ```[{"name": "Салат", "price": 5.99}])``` (обязательный)

Пример запроса:
```
{
  "table_number": 3,
  "items": [{"name": "Суп", "price": 7.50}, {"name": "Кофе", "price": 2.30}]
}
```
Пример ответа:
```
{
  "id": 1,
  "table_number": 3,
  "items": [{"name": "Суп", "price": 7.50}, {"name": "Кофе", "price": 2.30}],
  "total_price": 9.80,
  "status": "waiting"
}
```
#### Удаление заказа
- URL: ```DELETE /api/orders/{id}/```
- Параметры: ```id``` — идентификатор заказа (обязательный)
- Пример запроса:
```
DELETE http://localhost:8000/api/orders/1/
```
#### Поиск и отображение заказов
- URL: ```GET /api/orders/```
- Параметры фильтрации (опционально):
- ```table_number``` (int) — номер стола
- ```status (string)``` — статус заказа (например, ```waiting```, ```ready```, ```paid```)
- Пример запроса:
```
GET http://localhost:8000/api/orders/?status=paid
```

#### Изменение статуса заказа (и редактирование)
- URL: ```PATCH /api/orders/{id}/```
- Параметры:
Обновляемые поля, например, ```status```
- Пример запроса:
```
{
  "status": "paid"
}
```

#### Расчет выручки за смену
- URL: ```GET /api/revenue/``` 
- Описание: Возвращает общую сумму выручки по заказам со статусом «оплачено».
- Пример ответа:
```
{
  "revenue": "123.45"
}
```

# Структура проекта cafe_orders

### Корневая директория
- `cafe_orders/` — Основная конфигурация проекта Django.
  - `settings.py` — Настройки проекта (база данных, middleware, установленные приложения).
  - `urls.py` — Глобальные маршруты.
  - `wsgi.py` — Конфигурация для развертывания.

### Приложение `orders`
- `models.py` — Определение модели заказа `Order`.
- `views.py` — Обработчики запросов (CRUD, поиск, изменение статуса, расчет выручки).
- `urls.py` — Маршруты для управления заказами.
- `forms.py` — Django-формы для заказов.
- `admin.py` — Подключение модели `Order` к админ-панели.
- `templates/orders/` — Шаблоны интерфейса заказов:
  - `order_list.html` — Список заказов и поиск.
  - `order_form.html` — Форма создания и редактирования.
  - `order_detail.html` — Детальная информация и удаление заказа.
  - `revenue_report.html` — Отчет по выручке.

### API
- `api/serializers.py` — Сериализаторы для API.
- `api/views.py` — API-эндпоинты для работы с заказами.
- `api/urls.py` — Маршруты API.

### Дополнительно
- `requirements.txt` — Список зависимостей (Django, DRF и др.).
- `manage.py` — Командная утилита Django.
- `README.md` — Документация и инструкция по установке.

# Стек технологий:
1. Python 3.8+
2. Django 4+ (включая Django ORM для работы с базой данных)
3. HTML/CSS (для базового пользовательского интерфейса)
4. SQLite/PostgreSQL (для хранения данных)
